<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CraneIQ Pro Configuration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        slate: {
                            850: '#1e293b',
                            900: '#0f172a',
                        },
                        blue: {
                            600: '#2563eb',
                            700: '#1d4ed8',
                        },
                        primary: '#2563EB',
                        primaryHover: '#1D4ED8',
                        secondary: '#475569',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444',
                        surface: '#F8FAFC',
                        card: '#FFFFFF',
                        border: '#E2E8F0',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    }
                }
            }
        }
        window.FontAwesomeConfig = { autoReplaceSvg: 'nest' };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #CBD5E1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94A3B8; }
        body { font-family: 'Inter', sans-serif; background-color: #F1F5F9; color: #1E293B; }
        .toggle-checkbox:checked { right: 0; border-color: #2563EB; }
        .toggle-checkbox:checked + .toggle-label { background-color: #2563EB; }
        .radio-checkbox:checked { background-color: #2563EB; border-color: #2563EB; }
        .glass-panel { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        
        /* Sidebar Styles */
        .sidebar {
            width: 260px;
            background: white;
            border-right: 1px solid #E2E8F0;
            height: 100vh;
            overflow-y: auto;
            position: fixed;
            left: 0;
            top: 0;
            z-index: 40;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }
        
        .sidebar-logo {
            height: 64px;
            display: flex;
            align-items: center;
            padding: 0 20px;
            border-bottom: 1px solid #E2E8F0;
            background: white;
        }
        
        .logo-text {
            font-weight: 700;
            font-size: 18px;
            color: #2563EB;
        }
        
        .sidebar-nav {
            flex: 1;
            padding: 16px 0;
            overflow-y: auto;
        }
        
        .nav-section {
            margin-bottom: 24px;
        }
        
        .section-title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #64748B;
            padding: 0 20px 8px;
            margin-bottom: 4px;
            border-bottom: 1px solid #F1F5F9;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 8px 20px;
            color: #475569;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            border-left: 3px solid transparent;
            cursor: pointer;
        }
        
        .nav-item:hover {
            background: #F8FAFC;
            color: #2563EB;
        }
        
        .nav-item.active {
            background: #EFF6FF;
            color: #2563EB;
            border-left-color: #2563EB;
            font-weight: 600;
        }
        
        .nav-item i {
            width: 20px;
            margin-right: 12px;
            font-size: 14px;
            text-align: center;
        }
        
        .nav-item-count {
            margin-left: auto;
            background: #E2E8F0;
            color: #475569;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 500;
        }
        
        .sidebar-footer {
            padding: 16px 20px;
            border-top: 1px solid #E2E8F0;
            background: white;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: #2563EB;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
        
        .sidebar-toggle {
            display: none;
            position: fixed;
            left: 260px;
            top: 20px;
            z-index: 100;
            background: white;
            border: 1px solid #E2E8F0;
            border-left: none;
            border-radius: 0 6px 6px 0;
            padding: 10px 8px;
            cursor: pointer;
            color: #64748B;
            transition: all 0.3s;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .sidebar.collapsed {
            transform: translateX(-260px);
        }
        
        .sidebar.collapsed ~ .main-content-with-sidebar {
            margin-left: 0;
        }
        
        .sidebar.collapsed + .sidebar-toggle {
            left: 0;
        }
        
        .main-content-with-sidebar {
            margin-left: 260px;
            transition: margin-left 0.3s;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-260px);
            }
            
            .sidebar.active {
                transform: translateX(0);
                box-shadow: 0 0 20px rgba(0,0,0,0.1);
            }
            
            .sidebar-toggle {
                display: block;
                left: 0;
            }
            
            .sidebar.active + .sidebar-toggle {
                left: 260px;
            }
            
            .main-content-with-sidebar {
                margin-left: 0;
            }
        }
        
        /* CraneIQ Specific Styles */
        .signal-strength {
            display: flex;
            gap: 2px;
        }
        
        .signal-bar {
            width: 4px;
            border-radius: 1px;
        }
        
        .signal-bar.active {
            background-color: #10B981;
        }
        
        .signal-bar.inactive {
            background-color: #E2E8F0;
        }
        
        /* Custom file upload */
        .file-upload {
            border: 2px dashed #CBD5E1;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .file-upload:hover {
            border-color: #2563EB;
            background: #EFF6FF;
        }
        
        .file-upload input {
            display: none;
        }
        
        /* Smooth scroll offset */
        html {
            scroll-behavior: smooth;
        }
        
        /* Section highlight animation */
        @keyframes highlight {
            0% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(37, 99, 235, 0); }
            100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); }
        }
        
        .highlight-section {
            animation: highlight 2s ease;
            position: relative;
        }
    </style>
</head>
<body class="min-h-screen bg-slate-50">

    <!-- Sidebar will be inserted here by JavaScript -->
    <div id="sidebar-container"></div>

    <!-- Main Content Container -->
    <div class="main-content-with-sidebar">
        <!-- Header -->
        <header id="header" class="bg-white border-b border-slate-200 sticky top-0 z-30 shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
                <!-- Left: Breadcrumb -->
                <div class="flex items-center space-x-4">
                    <div class="hidden md:flex items-center text-sm text-slate-500 h-6">
                        <span><i class="fa-solid fa-sliders mr-2"></i>Settings</span>
                        <i class="fa-solid fa-chevron-right text-xs mx-2"></i>
                        <span class="text-slate-900 font-medium" id="page-title">CraneIQ Pro Configuration</span>
                    </div>
                </div>

                <!-- Right: Controls -->
                <div class="flex items-center space-x-4">
                    <div class="relative hidden sm:block">
                        <select id="gateway-select" class="appearance-none bg-slate-100 border border-slate-300 text-slate-700 py-1.5 pl-3 pr-8 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option>CraneIQ-Unit-01 (Active)</option>
                            <option>CraneIQ-Unit-02</option>
                            <option>CraneIQ-Unit-03</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-slate-500">
                            <i class="fa-solid fa-chevron-down text-xs"></i>
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button id="reset-btn" class="px-3 py-1.5 text-sm font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-md transition-colors">Reset</button>
                        <button id="cancel-btn" class="px-3 py-1.5 text-sm font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-md transition-colors">Cancel</button>
                        <button id="save-btn" class="px-3 py-1.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md shadow-sm transition-colors">Save Changes</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="mb-8">
                    <h1 class="text-2xl font-bold text-slate-900">CraneIQ Pro Configuration</h1>
                    <p class="text-slate-500 text-sm mt-1">Configure anti-collision systems, zoning, load monitoring, and crane safety parameters.</p>
                </div>

                <div class="space-y-8">
                    
                    <!-- SECTION 1: Crane Profile & Overview -->
                    <section id="crane-profile-section" class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Profile Card -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                            <div class="flex justify-between items-start mb-6">
                                <div>
                                    <h2 class="text-lg font-semibold text-slate-800">Crane Profile</h2>
                                    <p class="text-xs text-slate-500 uppercase tracking-wider mt-1">ID: CRANE-01</p>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full border border-green-200">Online</span>
                            </div>
                            
                            <div class="space-y-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-xs font-medium text-slate-700 mb-1">Crane Type</label>
                                        <select class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                            <option>Double-Girder EOT</option>
                                            <option>Single-Girder</option>
                                            <option>Gantry</option>
                                            <option>JIB</option>
                                            <option>Tower Crane</option>
                                            <option>RTG</option>
                                            <option>Portal Crane</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-slate-700 mb-1">Capacity</label>
                                        <div class="relative">
                                            <input type="text" value="25,000" class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 pl-3 pr-10 py-2">
                                            <span class="absolute right-3 top-2 text-xs text-slate-500">kg</span>
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-xs font-medium text-slate-700 mb-1">Operating Mode</label>
                                    <div class="flex bg-slate-100 rounded-md p-1 border border-slate-200">
                                        <button class="flex-1 py-2 text-xs font-medium rounded-md bg-blue-600 text-white shadow">Manual</button>
                                        <button class="flex-1 py-2 text-xs font-medium rounded-md text-slate-600 hover:bg-slate-50">Semi-Auto</button>
                                        <button class="flex-1 py-2 text-xs font-medium rounded-md text-slate-600 hover:bg-slate-50">Auto</button>
                                    </div>
                                </div>

                                <div class="pt-4 border-t border-slate-100">
                                    <div class="flex justify-between items-center text-sm mb-3">
                                        <span class="text-slate-600">Dimensions</span>
                                        <button class="text-blue-600 text-xs hover:text-blue-700 hover:underline">Edit Mapping</button>
                                    </div>
                                    <div class="grid grid-cols-3 gap-3 text-center">
                                        <div class="bg-slate-50 rounded-lg p-3 border border-slate-200">
                                            <div class="text-xs text-slate-500 mb-1">Span (X)</div>
                                            <div class="font-mono text-slate-900 text-sm">15.0m</div>
                                        </div>
                                        <div class="bg-slate-50 rounded-lg p-3 border border-slate-200">
                                            <div class="text-xs text-slate-500 mb-1">Travel (Y)</div>
                                            <div class="font-mono text-slate-900 text-sm">45.0m</div>
                                        </div>
                                        <div class="bg-slate-50 rounded-lg p-3 border border-slate-200">
                                            <div class="text-xs text-slate-500 mb-1">Height (Z)</div>
                                            <div class="font-mono text-slate-900 text-sm">12.0m</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Floor Layout & Coordinates Visualizer -->
                        <div class="lg:col-span-2 bg-white rounded-xl shadow-sm border border-slate-200 p-4 relative overflow-hidden">
                            <div class="flex justify-between items-center mb-4">
                                <div class="flex items-center gap-2">
                                    <i class="fa-solid fa-map-location-dot text-blue-600"></i>
                                    <h3 class="text-lg font-semibold text-slate-800">Floor Layout & Zones</h3>
                                </div>
                                <div class="flex gap-2">
                                    <button id="upload-layout-btn" class="px-3 py-1.5 text-sm font-medium bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-md transition-colors">
                                        <i class="fa-solid fa-upload mr-1"></i> Upload
                                    </button>
                                    <button class="px-3 py-1.5 text-sm font-medium bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-md transition-colors">
                                        <i class="fa-solid fa-expand"></i>
                                    </button>
                                </div>
                            </div>
                            <!-- Placeholder for CAD/Image -->
                            <div class="w-full h-64 bg-gradient-to-br from-slate-50 to-blue-50 rounded-lg border-2 border-dashed border-slate-300 flex items-center justify-center">
                                <div class="text-center">
                                    <i class="fa-solid fa-map text-4xl text-slate-300 mb-3"></i>
                                    <p class="text-sm text-slate-500">Upload or draw floor layout</p>
                                    <p class="text-xs text-slate-400 mt-1">Supports .dwg, .dxf, .png, .jpg</p>
                                </div>
                            </div>
                            <div class="mt-4 flex flex-wrap gap-2">
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 rounded-full bg-red-500"></div>
                                    <span class="text-xs text-slate-600">Restricted Zone</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                    <span class="text-xs text-slate-600">Slow Down Zone</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                    <span class="text-xs text-slate-600">Safe Zone</span>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- SECTION 2: Load Limiter Configuration -->
                    <section id="load-limiter-section" class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center">
                                    <i class="fa-solid fa-weight-hanging text-orange-600"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-slate-800">Load Limiter Configuration</h3>
                                    <p class="text-xs text-slate-500">Configure load limits, warnings, and safety thresholds</p>
                                </div>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" checked class="sr-only peer">
                                <div class="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Basic Load Settings -->
                            <div class="space-y-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-xs font-medium text-slate-700 mb-1">Rated Load</label>
                                        <div class="relative">
                                            <input type="text" value="25000" class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 pl-3 pr-10 py-2">
                                            <span class="absolute right-3 top-2 text-xs text-slate-500">kg</span>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-slate-700 mb-1">SWL</label>
                                        <div class="relative">
                                            <input type="text" value="100" class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 pl-3 pr-10 py-2">
                                            <span class="absolute right-3 top-2 text-xs text-slate-500">%</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-xs font-medium text-slate-700 mb-1">Warning Threshold</label>
                                        <div class="relative">
                                            <input type="text" value="90" class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 pl-3 pr-10 py-2">
                                            <span class="absolute right-3 top-2 text-xs text-slate-500">%</span>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-slate-700 mb-1">Cutoff Threshold</label>
                                        <div class="relative">
                                            <input type="text" value="110" class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 pl-3 pr-10 py-2">
                                            <span class="absolute right-3 top-2 text-xs text-slate-500">%</span>
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-xs font-medium text-slate-700 mb-1">Signal Source</label>
                                    <select class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                        <option>Load Cell</option>
                                        <option>Current Sense</option>
                                        <option>Pressure Sensor</option>
                                        <option>Combined</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Advanced Load Settings -->
                            <div class="space-y-4">
                                <!-- Load Curve Upload -->
                                <div>
                                    <label class="block text-xs font-medium text-slate-700 mb-2">Load Curve</label>
                                    <div class="file-upload" id="load-curve-upload">
                                        <i class="fa-solid fa-file-arrow-up text-2xl text-slate-400 mb-2"></i>
                                        <p class="text-sm text-slate-600 mb-1">Upload load curve (.csv)</p>
                                        <p class="text-xs text-slate-400">Drag & drop or click to browse</p>
                                        <input type="file" accept=".csv" id="load-curve-file">
                                    </div>
                                </div>

                                <!-- Tilt Compensation -->
                                <div class="flex items-center justify-between">
                                    <div>
                                        <span class="text-sm text-slate-700">Tilt Compensation</span>
                                        <p class="text-xs text-slate-500">Compensate for crane tilt</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" checked class="sr-only peer">
                                        <div class="w-10 h-5 bg-slate-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"></div>
                                    </label>
                                </div>

                                <!-- Additional Features -->
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-slate-700">Shock Load Detect</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-10 h-5 bg-slate-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-slate-700">Swing Detect</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-10 h-5 bg-slate-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- SECTION 3: Datalogger Configuration -->
                    <section id="datalogger-section" class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center">
                                    <i class="fa-solid fa-database text-purple-600"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-slate-800">Datalogger Settings</h3>
                                    <p class="text-xs text-slate-500">Configure crane event logging and data retention</p>
                                </div>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" checked class="sr-only peer">
                                <div class="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Left Column -->
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Log Interval</label>
                                    <select class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                        <option>100ms (High Precision)</option>
                                        <option>500ms (Standard)</option>
                                        <option>1 second</option>
                                        <option>5 seconds</option>
                                        <option>10 seconds</option>
                                        <option>30 seconds</option>
                                        <option>1 minute (Power Saving)</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Buffer Size</label>
                                    <select class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                        <option>10 MB</option>
                                        <option>50 MB</option>
                                        <option>100 MB (Recommended)</option>
                                        <option>500 MB</option>
                                        <option>1 GB</option>
                                        <option>5 GB</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Log Format</label>
                                    <div class="flex space-x-4">
                                        <label class="inline-flex items-center">
                                            <input type="radio" name="logFormat" checked class="form-radio text-blue-600 border-slate-300 focus:ring-blue-500">
                                            <span class="ml-2 text-sm text-slate-700">CSV</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="radio" name="logFormat" class="form-radio text-blue-600 border-slate-300 focus:ring-blue-500">
                                            <span class="ml-2 text-sm text-slate-700">JSON</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="radio" name="logFormat" class="form-radio text-blue-600 border-slate-300 focus:ring-blue-500">
                                            <span class="ml-2 text-sm text-slate-700">Binary</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Right Column -->
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Upload Rules</label>
                                    <select class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                        <option>Immediate (Real-time)</option>
                                        <option>Batch (Every 15 minutes)</option>
                                        <option>Batch (Every 1 hour)</option>
                                        <option>Batch (Every 6 hours)</option>
                                        <option>Batch (Every 24 hours)</option>
                                        <option>Delayed (Low priority)</option>
                                        <option>Manual Only</option>
                                    </select>
                                </div>
                                
                                <!-- Trigger Events -->
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Trigger Events</label>
                                    <div class="grid grid-cols-2 gap-2">
                                        <label class="flex items-center">
                                            <input type="checkbox" checked class="rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                                            <span class="ml-2 text-sm text-slate-700">Load exceed</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" checked class="rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                                            <span class="ml-2 text-sm text-slate-700">Motion start/stop</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" checked class="rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                                            <span class="ml-2 text-sm text-slate-700">Zone breach</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" checked class="rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                                            <span class="ml-2 text-sm text-slate-700">Near collision</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" class="rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                                            <span class="ml-2 text-sm text-slate-700">Temperature alert</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" class="rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                                            <span class="ml-2 text-sm text-slate-700">Vibration alert</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" class="rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                                            <span class="ml-2 text-sm text-slate-700">Brake event</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" class="rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                                            <span class="ml-2 text-sm text-slate-700">Maintenance event</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- SECTION 4: Safety Systems (ACS & Zoning) -->
                    <section id="safety-configuration" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        
                        <!-- Anti-Collision System (ACS) -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center">
                                        <i class="fa-solid fa-shield-halved text-red-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-semibold text-slate-800">Anti-Collision System</h3>
                                        <p class="text-xs text-slate-500">Crane-to-Crane & Object Detection</p>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>

                            <div class="space-y-5">
                                <!-- Geometry Input -->
                                <div class="bg-slate-50 rounded-lg p-4 border border-slate-200">
                                    <h4 class="text-sm font-medium text-slate-700 mb-3">Crane Geometry</h4>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-xs font-medium text-slate-600 mb-1">Boom Length</label>
                                            <div class="relative">
                                                <input type="text" value="30.0" class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 pl-3 pr-10 py-2">
                                                <span class="absolute right-3 top-2 text-xs text-slate-500">m</span>
                                            </div>
                                        </div>
                                        <div>
                                            <label class="block text-xs font-medium text-slate-600 mb-1">Jib Angle</label>
                                            <div class="relative">
                                                <input type="text" value="45.0" class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 pl-3 pr-10 py-2">
                                                <span class="absolute right-3 top-2 text-xs text-slate-500">Â°</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Sensor Config -->
                                <div class="bg-slate-50 rounded-lg p-4 border border-slate-200">
                                    <h4 class="text-sm font-medium text-slate-700 mb-3">Detection Settings</h4>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-xs font-medium text-slate-600 mb-1">Sensor Tech</label>
                                            <select class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                                <option>Laser LiDAR</option>
                                                <option>Radar</option>
                                                <option>Ultrasonic</option>
                                                <option>Camera Vision</option>
                                                <option>Combined</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-xs font-medium text-slate-600 mb-1">Comm. Protocol</label>
                                            <select class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                                <option>Wireless (RF)</option>
                                                <option>CAN Bus</option>
                                                <option>EtherCAT</option>
                                                <option>Wireless Mesh</option>
                                                <option>Profinet</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- Distances -->
                                <div>
                                    <div class="flex justify-between text-sm text-slate-600 mb-2">
                                        <span>Warning Distance</span>
                                        <span class="font-medium">6.0 m</span>
                                    </div>
                                    <div class="w-full bg-slate-200 rounded-full h-2 mb-4">
                                        <div class="bg-yellow-400 h-2 rounded-full" style="width: 60%"></div>
                                    </div>
                                    
                                    <div class="flex justify-between text-sm text-slate-600 mb-2">
                                        <span>Slow-Down Distance</span>
                                        <span class="font-medium">4.0 m</span>
                                    </div>
                                    <div class="w-full bg-slate-200 rounded-full h-2 mb-4">
                                        <div class="bg-yellow-500 h-2 rounded-full" style="width: 40%"></div>
                                    </div>
                                    
                                    <div class="flex justify-between text-sm text-slate-600 mb-2">
                                        <span>Critical Stop Distance</span>
                                        <span class="font-medium">2.0 m</span>
                                    </div>
                                    <div class="w-full bg-slate-200 rounded-full h-2">
                                        <div class="bg-red-500 h-2 rounded-full" style="width: 20%"></div>
                                    </div>
                                </div>

                                <!-- Paired Cranes -->
                                <div>
                                    <h4 class="text-sm font-medium text-slate-700 mb-2">Paired Cranes</h4>
                                    <div class="flex flex-wrap gap-2">
                                        <span class="px-3 py-1.5 bg-slate-100 border border-slate-300 rounded-md text-sm text-slate-700 flex items-center gap-2">
                                            Crane-02 <i class="fa-solid fa-link text-green-600"></i>
                                        </span>
                                        <span class="px-3 py-1.5 bg-slate-100 border border-slate-300 rounded-md text-sm text-slate-700 flex items-center gap-2">
                                            Crane-03 <i class="fa-solid fa-link text-green-600"></i>
                                        </span>
                                        <span class="px-3 py-1.5 bg-slate-100 border border-slate-300 rounded-md text-sm text-slate-700 flex items-center gap-2">
                                            Crane-04 <i class="fa-solid fa-unlink text-red-600"></i>
                                        </span>
                                        <button id="add-peer-btn" class="px-3 py-1.5 bg-white border border-slate-300 border-dashed rounded-md text-sm text-slate-600 hover:text-slate-800 hover:border-slate-400 transition flex items-center gap-2">
                                            <i class="fa-solid fa-plus"></i> Add Peer
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Zoning Configuration -->
                        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center">
                                        <i class="fa-solid fa-draw-polygon text-blue-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-semibold text-slate-800">Zoning Configuration</h3>
                                        <p class="text-xs text-slate-500">Restricted Areas & Speed Limits</p>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>

                            <div class="space-y-4">
                                <!-- Zone Input -->
                                <div class="bg-slate-50 rounded-lg p-4 border border-slate-200">
                                    <div class="flex justify-between items-center mb-3">
                                        <h4 class="text-sm font-medium text-slate-700">Add New Zone</h4>
                                        <button id="add-zone-btn" class="text-blue-600 text-sm hover:text-blue-700 hover:underline flex items-center gap-1">
                                            <i class="fa-solid fa-plus"></i> New Zone
                                        </button>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4 mb-3">
                                        <div>
                                            <label class="block text-xs font-medium text-slate-600 mb-1">Zone Type</label>
                                            <select class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                                <option>No-Go (Restricted)</option>
                                                <option>Slow Zone (Speed Limit)</option>
                                                <option>Warning Only</option>
                                                <option>Safe Zone</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-xs font-medium text-slate-600 mb-1">Priority</label>
                                            <select class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                                <option>Low</option>
                                                <option>Medium</option>
                                                <option>High</option>
                                                <option>Critical</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-slate-600 mb-1">Coordinates/Dimensions</label>
                                        <textarea class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 h-20" placeholder="Enter coordinates or dimensions (X1,Y1,X2,Y2,Height)"></textarea>
                                    </div>
                                </div>

                                <!-- Zone List -->
                                <div class="bg-slate-50 rounded-lg border border-slate-200 overflow-hidden">
                                    <div class="p-3 border-b border-slate-200 flex justify-between items-center bg-white">
                                        <span class="text-sm font-semibold text-slate-700">Active Zones</span>
                                        <span class="text-xs text-slate-500">3 zones configured</span>
                                    </div>
                                    <div class="divide-y divide-slate-200 max-h-48 overflow-y-auto">
                                        <div class="p-3 flex items-center justify-between hover:bg-slate-100/50 transition">
                                            <div class="flex items-center gap-3">
                                                <div class="w-3 h-3 rounded-full bg-red-500"></div>
                                                <div>
                                                    <div class="text-sm text-slate-800 font-medium">Chemical Storage</div>
                                                    <div class="text-xs text-slate-500">Type: No-Go â¢ Priority: High â¢ Coordinates: 10,20,30,40,8</div>
                                                </div>
                                            </div>
                                            <button class="text-slate-400 hover:text-slate-600 p-1 rounded hover:bg-slate-200">
                                                <i class="fa-solid fa-pen text-xs"></i>
                                            </button>
                                        </div>
                                        <div class="p-3 flex items-center justify-between hover:bg-slate-100/50 transition">
                                            <div class="flex items-center gap-3">
                                                <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                                <div>
                                                    <div class="text-sm text-slate-800 font-medium">Mezzanine Floor</div>
                                                    <div class="text-xs text-slate-500">Type: Slow Zone (20%) â¢ Priority: Medium</div>
                                                </div>
                                            </div>
                                            <button class="text-slate-400 hover:text-slate-600 p-1 rounded hover:bg-slate-200">
                                                <i class="fa-solid fa-pen text-xs"></i>
                                            </button>
                                        </div>
                                        <div class="p-3 flex items-center justify-between hover:bg-slate-100/50 transition">
                                            <div class="flex items-center gap-3">
                                                <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                                <div>
                                                    <div class="text-sm text-slate-800 font-medium">Loading Bay</div>
                                                    <div class="text-xs text-slate-500">Type: Warning Only â¢ Priority: Low</div>
                                                </div>
                                            </div>
                                            <button class="text-slate-400 hover:text-slate-600 p-1 rounded hover:bg-slate-200">
                                                <i class="fa-solid fa-pen text-xs"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-2 gap-4">
                                    <div class="bg-slate-50 rounded-lg p-4 border border-slate-200">
                                        <label class="block text-sm font-medium text-slate-700 mb-2">Violation Action</label>
                                        <select class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                            <option>Hard Stop</option>
                                            <option>Slow Down</option>
                                            <option>Alarm Only</option>
                                            <option>Log Only</option>
                                            <option>Gradual Stop</option>
                                        </select>
                                    </div>
                                    <div class="bg-slate-50 rounded-lg p-4 border border-slate-200">
                                        <label class="block text-sm font-medium text-slate-700 mb-2">Override Mode</label>
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-slate-600">Auth Required</span>
                                            <i class="fa-solid fa-key text-yellow-500"></i>
                                        </div>
                                        <p class="text-xs text-slate-500 mt-1">Admin PIN needed for override</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- SECTION 5: Health & Load Monitoring -->
                    <section id="health-monitoring" class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center">
                                    <i class="fa-solid fa-heart-pulse text-emerald-600"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-slate-800">Health & Load Intelligence</h3>
                                    <p class="text-xs text-slate-500">Load monitoring, wear detection, and predictive maintenance</p>
                                </div>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" checked class="sr-only peer">
                                <div class="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            
                            <!-- Load Monitoring Card -->
                            <div class="bg-slate-50 rounded-lg border border-slate-200 p-5">
                                <div class="flex justify-between items-center mb-4">
                                    <h4 class="font-medium text-slate-800">Load Monitoring</h4>
                                    <i class="fa-solid fa-weight-hanging text-blue-600"></i>
                                </div>
                                
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-xs font-medium text-slate-600 mb-2">Overload Thresholds</label>
                                        <div class="flex items-center gap-2">
                                            <div class="bg-white px-3 py-2 rounded border border-slate-300 flex-1 text-center">
                                                <span class="text-sm font-medium text-yellow-600">90%</span>
                                                <div class="text-xs text-slate-500">Warning</div>
                                            </div>
                                            <div class="bg-white px-3 py-2 rounded border border-slate-300 flex-1 text-center">
                                                <span class="text-sm font-medium text-red-600">110%</span>
                                                <div class="text-xs text-slate-500">Trip</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between text-sm py-2 border-t border-slate-200">
                                        <span class="text-slate-600">Shock Load Detect</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-10 h-5 bg-slate-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between text-sm py-2 border-t border-slate-200">
                                        <span class="text-slate-600">Swing Detect</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-10 h-5 bg-slate-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Motor Health -->
                            <div class="bg-slate-50 rounded-lg border border-slate-200 p-5">
                                <div class="flex justify-between items-center mb-4">
                                    <h4 class="font-medium text-slate-800">Motor Health</h4>
                                    <i class="fa-solid fa-gear text-emerald-600"></i>
                                </div>
                                
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-xs font-medium text-slate-600 mb-2">Motor Types</label>
                                        <div class="space-y-2">
                                            <div class="flex items-center justify-between text-sm">
                                                <span class="text-slate-600">LT Motor</span>
                                                <span class="font-medium text-slate-800">65Â°C</span>
                                            </div>
                                            <div class="flex items-center justify-between text-sm">
                                                <span class="text-slate-600">CT Motor</span>
                                                <span class="font-medium text-slate-800">72Â°C</span>
                                            </div>
                                            <div class="flex items-center justify-between text-sm">
                                                <span class="text-slate-600">MH Motor</span>
                                                <span class="font-medium text-slate-800">58Â°C</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-slate-600 mb-2">Temperature Alert</label>
                                        <div class="flex items-center gap-2">
                                            <div class="bg-white px-3 py-2 rounded border border-slate-300 flex-1 text-center">
                                                <span class="text-sm font-medium text-yellow-600">75Â°C</span>
                                                <div class="text-xs text-slate-500">Warning</div>
                                            </div>
                                            <div class="bg-white px-3 py-2 rounded border border-slate-300 flex-1 text-center">
                                                <span class="text-sm font-medium text-red-600">90Â°C</span>
                                                <div class="text-xs text-slate-500">Shutdown</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-slate-600 mb-2">Vibration Limits</label>
                                        <div class="space-y-2">
                                            <div class="flex items-center justify-between text-sm">
                                                <span class="text-slate-600">RMS Limit</span>
                                                <input type="text" value="4.2" class="w-16 text-sm border-slate-300 rounded px-2 py-1 text-right">
                                            </div>
                                            <div class="flex items-center justify-between text-sm">
                                                <span class="text-slate-600">Peak Limit</span>
                                                <input type="text" value="6.5" class="w-16 text-sm border-slate-300 rounded px-2 py-1 text-right">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Brake Monitoring -->
                            <div class="bg-slate-50 rounded-lg border border-slate-200 p-5">
                                <div class="flex justify-between items-center mb-4">
                                    <h4 class="font-medium text-slate-800">Brake Monitoring</h4>
                                    <i class="fa-solid fa-stop-circle text-red-600"></i>
                                </div>
                                
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-xs font-medium text-slate-600 mb-2">Brake Coil Current</label>
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="text-xs text-slate-500">Normal Range</span>
                                            <span class="text-sm font-medium text-slate-800">2.5 - 3.5 A</span>
                                        </div>
                                        <div class="w-full bg-slate-200 rounded-full h-2">
                                            <div class="bg-green-500 h-2 rounded-full" style="width: 70%"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-slate-600 mb-2">Wear Threshold</label>
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="text-xs text-slate-500">Current</span>
                                            <span class="text-sm font-medium text-slate-800">12% worn</span>
                                        </div>
                                        <div class="w-full bg-slate-200 rounded-full h-2">
                                            <div class="bg-green-500 h-2 rounded-full" style="width: 12%"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="pt-3 border-t border-slate-200">
                                        <div class="flex items-center justify-between text-sm">
                                            <div>
                                                <span class="text-slate-600">Brake Release Time</span>
                                                <p class="text-xs text-slate-500">Expected: 120ms</p>
                                            </div>
                                            <input type="text" value="115" class="w-16 text-sm border-slate-300 rounded px-2 py-1 text-right">
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between text-sm pt-2">
                                        <span class="text-slate-600">Slippage Detection</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-10 h-5 bg-slate-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Predictive Maintenance -->
                            <div class="bg-slate-50 rounded-lg border border-slate-200 p-5">
                                <div class="flex justify-between items-center mb-4">
                                    <h4 class="font-medium text-slate-800">Predictive Maintenance</h4>
                                    <i class="fa-solid fa-chart-line text-purple-600"></i>
                                </div>
                                
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-xs font-medium text-slate-600 mb-2">Next Service</label>
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <div class="text-sm font-medium text-slate-800">15 Days</div>
                                                <div class="text-xs text-slate-500">Based on usage</div>
                                            </div>
                                            <i class="fa-solid fa-calendar-clock text-blue-500"></i>
                                        </div>
                                    </div>
                                    
                                    <div class="pt-3 border-t border-slate-200">
                                        <div class="flex items-center justify-between text-sm">
                                            <span class="text-slate-600">Data Collection</span>
                                            <label class="relative inline-flex items-center cursor-pointer">
                                                <input type="checkbox" checked class="sr-only peer">
                                                <div class="w-10 h-5 bg-slate-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"></div>
                                            </label>
                                        </div>
                                        <p class="text-xs text-slate-500 mt-1">Upload usage data to cloud</p>
                                    </div>
                                    
                                    <div class="pt-3 border-t border-slate-200">
                                        <div class="flex items-center justify-between text-sm">
                                            <span class="text-slate-600">Maintenance Rules</span>
                                            <button class="text-blue-600 text-xs hover:text-blue-700 hover:underline">Configure</button>
                                        </div>
                                        <p class="text-xs text-slate-500 mt-1">Set automated alerts</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- SECTION 6: Rule Engine Integration - VIEW ONLY -->
                    <section id="rule-engine-section" class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg bg-indigo-100 flex items-center justify-center">
                                    <i class="fa-solid fa-sitemap text-indigo-600"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-slate-800">Rule Engine Integration</h3>
                                    <p class="text-xs text-slate-500">View existing safety rules mapped to parameters and actions</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-xs text-slate-500">View Only</span>
                                <i class="fa-solid fa-eye text-blue-500"></i>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            <!-- Info Box -->
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <div class="flex items-start gap-3">
                                    <i class="fa-solid fa-circle-info text-blue-500 mt-0.5"></i>
                                    <div>
                                        <h4 class="text-sm font-medium text-blue-800 mb-1">Rule Configuration</h4>
                                        <p class="text-xs text-blue-600">
                                            Rules are created automatically based on your safety parameter configurations. 
                                            To modify rules, update the corresponding safety parameters in their respective sections.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Existing Rules List -->
                            <div>
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="font-medium text-slate-700">Active Rules (6)</h4>
                                    <span class="text-xs text-slate-500">Auto-generated from safety configurations</span>
                                </div>
                                <div class="space-y-3">
                                    <!-- Rule Item 1: Load Limiter Rule -->
                                    <div class="flex items-center justify-between p-3 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition group">
                                        <div class="flex-1">
                                            <div class="flex items-center gap-2 mb-1">
                                                <i class="fa-solid fa-weight-hanging text-blue-500 text-xs"></i>
                                                <div class="text-sm font-medium text-slate-800">Load Limiter Rule</div>
                                                <span class="px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded-full">Auto</span>
                                            </div>
                                            <div class="text-sm text-slate-600 mb-1">IF Load > 90% THEN Trigger Audible Alarm</div>
                                            <div class="flex items-center gap-3">
                                                <span class="text-xs text-slate-500">Source: Load Limiter Configuration</span>
                                                <span class="text-xs text-slate-500">Priority: <span class="font-medium text-yellow-600">High</span></span>
                                            </div>
                                        </div>
                                        <a href="#load-limiter-section" class="text-blue-600 hover:text-blue-700 p-2 rounded hover:bg-blue-50 opacity-0 group-hover:opacity-100 transition-opacity" title="Go to Load Limiter">
                                            <i class="fa-solid fa-arrow-right"></i>
                                        </a>
                                    </div>
                                    
                                    <!-- Rule Item 2: Temperature Rule -->
                                    <div class="flex items-center justify-between p-3 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition group">
                                        <div class="flex-1">
                                            <div class="flex items-center gap-2 mb-1">
                                                <i class="fa-solid fa-temperature-high text-red-500 text-xs"></i>
                                                <div class="text-sm font-medium text-slate-800">Motor Temperature Rule</div>
                                                <span class="px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded-full">Auto</span>
                                            </div>
                                            <div class="text-sm text-slate-600 mb-1">IF Motor Temperature >= 75Â°C THEN Send Email Alert</div>
                                            <div class="flex items-center gap-3">
                                                <span class="text-xs text-slate-500">Source: Health & Load Intelligence</span>
                                                <span class="text-xs text-slate-500">Priority: <span class="font-medium text-yellow-600">Medium</span></span>
                                            </div>
                                        </div>
                                        <a href="#health-monitoring" class="text-blue-600 hover:text-blue-700 p-2 rounded hover:bg-blue-50 opacity-0 group-hover:opacity-100 transition-opacity" title="Go to Health Monitoring">
                                            <i class="fa-solid fa-arrow-right"></i>
                                        </a>
                                    </div>
                                    
                                    <!-- Rule Item 3: Zone Violation Rule -->
                                    <div class="flex items-center justify-between p-3 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition group">
                                        <div class="flex-1">
                                            <div class="flex items-center gap-2 mb-1">
                                                <i class="fa-solid fa-draw-polygon text-green-500 text-xs"></i>
                                                <div class="text-sm font-medium text-slate-800">Zone Violation Rule</div>
                                                <span class="px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded-full">Auto</span>
                                            </div>
                                            <div class="text-sm text-slate-600 mb-1">IF Zone Violation == True THEN Stop Crane Motion</div>
                                            <div class="flex items-center gap-3">
                                                <span class="text-xs text-slate-500">Source: Zoning Configuration</span>
                                                <span class="text-xs text-slate-500">Priority: <span class="font-medium text-red-600">Critical</span></span>
                                            </div>
                                        </div>
                                        <a href="#safety-configuration" class="text-blue-600 hover:text-blue-700 p-2 rounded hover:bg-blue-50 opacity-0 group-hover:opacity-100 transition-opacity" title="Go to Zone Control">
                                            <i class="fa-solid fa-arrow-right"></i>
                                        </a>
                                    </div>
                                    
                                    <!-- Rule Item 4: Collision Rule -->
                                    <div class="flex items-center justify-between p-3 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition group">
                                        <div class="flex-1">
                                            <div class="flex items-center gap-2 mb-1">
                                                <i class="fa-solid fa-shield-halved text-purple-500 text-xs"></i>
                                                <div class="text-sm font-medium text-slate-800">Anti-Collision Rule</div>
                                                <span class="px-2 py-0.5 bg-purple-100 text-purple-700 text-xs font-medium rounded-full">Auto</span>
                                            </div>
                                            <div class="text-sm text-slate-600 mb-1">IF Collision Distance <= 2.0m THEN Emergency Stop</div>
                                            <div class="flex items-center gap-3">
                                                <span class="text-xs text-slate-500">Source: Anti-Collision System</span>
                                                <span class="text-xs text-slate-500">Priority: <span class="font-medium text-red-600">Critical</span></span>
                                            </div>
                                        </div>
                                        <a href="#safety-configuration" class="text-blue-600 hover:text-blue-700 p-2 rounded hover:bg-blue-50 opacity-0 group-hover:opacity-100 transition-opacity" title="Go to Anti-Collision">
                                            <i class="fa-solid fa-arrow-right"></i>
                                        </a>
                                    </div>
                                    
                                    <!-- Rule Item 5: Brake Wear Rule -->
                                    <div class="flex items-center justify-between p-3 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition group">
                                        <div class="flex-1">
                                            <div class="flex items-center gap-2 mb-1">
                                                <i class="fa-solid fa-stop-circle text-orange-500 text-xs"></i>
                                                <div class="text-sm font-medium text-slate-800">Brake Wear Rule</div>
                                                <span class="px-2 py-0.5 bg-orange-100 text-orange-700 text-xs font-medium rounded-full">Auto</span>
                                            </div>
                                            <div class="text-sm text-slate-600 mb-1">IF Brake Wear > 75% THEN Send Maintenance Alert</div>
                                            <div class="flex items-center gap-3">
                                                <span class="text-xs text-slate-500">Source: Brake Monitoring</span>
                                                <span class="text-xs text-slate-500">Priority: <span class="font-medium text-yellow-600">Medium</span></span>
                                            </div>
                                        </div>
                                        <a href="#health-monitoring" class="text-blue-600 hover:text-blue-700 p-2 rounded hover:bg-blue-50 opacity-0 group-hover:opacity-100 transition-opacity" title="Go to Brake Monitoring">
                                            <i class="fa-solid fa-arrow-right"></i>
                                        </a>
                                    </div>
                                    
                                    <!-- Rule Item 6: Vibration Rule -->
                                    <div class="flex items-center justify-between p-3 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition group">
                                        <div class="flex-1">
                                            <div class="flex items-center gap-2 mb-1">
                                                <i class="fa-solid fa-wave-square text-emerald-500 text-xs"></i>
                                                <div class="text-sm font-medium text-slate-800">Vibration Rule</div>
                                                <span class="px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs font-medium rounded-full">Auto</span>
                                            </div>
                                            <div class="text-sm text-slate-600 mb-1">IF Vibration Level > 4.2mm/s THEN Slow Down Crane</div>
                                            <div class="flex items-center gap-3">
                                                <span class="text-xs text-slate-500">Source: Motor Health Monitoring</span>
                                                <span class="text-xs text-slate-500">Priority: <span class="font-medium text-yellow-600">High</span></span>
                                            </div>
                                        </div>
                                        <a href="#health-monitoring" class="text-blue-600 hover:text-blue-700 p-2 rounded hover:bg-blue-50 opacity-0 group-hover:opacity-100 transition-opacity" title="Go to Motor Health">
                                            <i class="fa-solid fa-arrow-right"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <!-- Rule Sources Legend -->
                            <div class="bg-slate-50 rounded-lg border border-slate-200 p-4">
                                <h4 class="text-sm font-medium text-slate-700 mb-3">Rule Sources</h4>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                    <a href="#load-limiter-section" class="flex items-center justify-between p-2 hover:bg-white rounded border border-slate-200 transition">
                                        <div class="flex items-center gap-2">
                                            <div class="w-3 h-3 rounded bg-blue-500"></div>
                                            <span class="text-sm text-slate-700">Load Limiter Rules</span>
                                        </div>
                                        <span class="text-xs text-slate-500">2 rules</span>
                                    </a>
                                    <a href="#safety-configuration" class="flex items-center justify-between p-2 hover:bg-white rounded border border-slate-200 transition">
                                        <div class="flex items-center gap-2">
                                            <div class="w-3 h-3 rounded bg-green-500"></div>
                                            <span class="text-sm text-slate-700">Zone Control Rules</span>
                                        </div>
                                        <span class="text-xs text-slate-500">3 rules</span>
                                    </a>
                                    <a href="#safety-configuration" class="flex items-center justify-between p-2 hover:bg-white rounded border border-slate-200 transition">
                                        <div class="flex items-center gap-2">
                                            <div class="w-3 h-3 rounded bg-red-500"></div>
                                            <span class="text-sm text-slate-700">Anti-Collision Rules</span>
                                        </div>
                                        <span class="text-xs text-slate-500">2 rules</span>
                                    </a>
                                    <a href="#health-monitoring" class="flex items-center justify-between p-2 hover:bg-white rounded border border-slate-200 transition">
                                        <div class="flex items-center gap-2">
                                            <div class="w-3 h-3 rounded bg-emerald-500"></div>
                                            <span class="text-sm text-slate-700">Health Monitoring Rules</span>
                                        </div>
                                        <span class="text-xs text-slate-500">4 rules</span>
                                    </a>
                                </div>
                            </div>

                            <!-- How Rules Work -->
                            <div class="bg-slate-50 rounded-lg border border-slate-200 p-4">
                                <h4 class="text-sm font-medium text-slate-700 mb-3">How Rules Are Generated</h4>
                                <div class="space-y-2 text-sm text-slate-600">
                                    <div class="flex items-start gap-2">
                                        <i class="fa-solid fa-check-circle text-green-500 mt-0.5"></i>
                                        <span>Rules are automatically created when you configure safety parameters</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <i class="fa-solid fa-check-circle text-green-500 mt-0.5"></i>
                                        <span>Each safety threshold creates a corresponding rule</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <i class="fa-solid fa-check-circle text-green-500 mt-0.5"></i>
                                        <span>Priority is determined by the criticality of the safety parameter</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <i class="fa-solid fa-check-circle text-green-500 mt-0.5"></i>
                                        <span>To modify a rule, update the corresponding safety parameter</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- SECTION 7: Advanced Settings -->
                    <section id="advanced-settings" class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                        <h3 class="text-lg font-semibold text-slate-800 mb-6">Advanced Settings</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Communication Settings -->
                            <div class="space-y-4">
                                <h4 class="text-sm font-semibold text-slate-700 uppercase tracking-wider">Communication</h4>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-xs font-medium text-slate-600 mb-1">Update Interval</label>
                                        <select class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                            <option>100ms (High Precision)</option>
                                            <option>500ms (Balanced)</option>
                                            <option>1s (Power Saving)</option>
                                            <option>5s (Diagnostic)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-slate-600 mb-1">Data Retention</label>
                                        <select class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                            <option>7 Days</option>
                                            <option>30 Days</option>
                                            <option>90 Days</option>
                                            <option>1 Year</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Alerts & Notifications -->
                            <div class="space-y-4">
                                <h4 class="text-sm font-semibold text-slate-700 uppercase tracking-wider">Alerts & Notifications</h4>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-slate-600">Email Alerts</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-10 h-5 bg-slate-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-slate-600">SMS Notifications</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer">
                                            <div class="w-10 h-5 bg-slate-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-slate-600">Audible Alarms</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-10 h-5 bg-slate-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </main>

        <!-- Footer Actions -->
        <footer class="bg-white border-t border-slate-200 mt-8">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                <div class="flex justify-end space-x-4">
                    <button id="test-btn" class="px-5 py-2.5 text-sm font-medium bg-white border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors">
                        <i class="fa-solid fa-plug mr-2"></i> Test Connection
                    </button>
                    <button id="footer-reset-btn" class="px-5 py-2.5 text-sm font-medium text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors">
                        <i class="fa-solid fa-rotate-left mr-2"></i> Reset to Default
                    </button>
                    <button id="footer-cancel-btn" class="px-5 py-2.5 text-sm font-medium bg-white border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors">
                        Cancel
                    </button>
                    <button id="footer-save-btn" class="px-6 py-2.5 text-sm font-medium bg-blue-600 hover:bg-blue-700 text-white rounded-md shadow-sm transition-colors">
                        <i class="fa-solid fa-floppy-disk mr-2"></i> Save Configuration
                    </button>
                </div>
            </div>
        </footer>
    </div> <!-- End of main content container -->

    <!-- Notification Container -->
    <div id="notification-container" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <script>
        // Fetch and insert sidebar from sidebar.html
        async function loadSidebar() {
            try {
                const response = await fetch('sidebar.html');
                if (!response.ok) {
                    throw new Error(`Failed to load sidebar: ${response.status}`);
                }
                
                const html = await response.text();
                
                // Insert the entire HTML content
                document.getElementById('sidebar-container').innerHTML = html;
                
                // Update the active page to CraneIQ Pro Configuration
                updateActivePage();
                
                // Initialize sidebar functionality
                initializeSidebar();
                
            } catch (error) {
                console.error('Error loading sidebar:', error);
                // Fallback: create a basic sidebar if fetch fails
                createFallbackSidebar();
            }
        }

        // Create fallback sidebar if fetch fails
        function createFallbackSidebar() {
            const fallbackHTML = `
                <div class="sidebar" id="sidebar">
                    <div class="sidebar-logo">
                        <div class="logo-text">
                            <i class="fa-solid fa-layer-group mr-2"></i> Innospace
                        </div>
                    </div>
                    <div class="sidebar-nav">
                        <div class="nav-section">
                            <div class="section-title">Configuration</div>
                            <a href="general-configuration.html" class="nav-item">
                                <i class="fa-solid fa-sliders"></i> General Configuration
                            </a>
                            <a href="device-management.html" class="nav-item">
                                <i class="fa-solid fa-microchip"></i> Device Management
                            </a>
                            <a href="craneiq-config.html" class="nav-item active">
                                <i class="fa-solid fa-crane"></i> CraneIQ Pro
                            </a>
                            <a href="protocol-integration.html" class="nav-item">
                                <i class="fa-solid fa-plug"></i> Protocol Integration
                            </a>
                            <a href="ota-recovery.html" class="nav-item">
                                <i class="fa-solid fa-cloud-arrow-up"></i> OTA & Recovery
                            </a>
                            <a href="monitoring-analytics.html" class="nav-item">
                                <i class="fa-solid fa-chart-line"></i> Monitoring & Analytics
                            </a>
                        </div>
                        <div class="nav-section">
                            <div class="section-title">System</div>
                            <a href="backup-restore.html" class="nav-item">
                                <i class="fa-solid fa-database"></i> Backup & Restore
                            </a>
                            <a href="logs-diagnostics.html" class="nav-item">
                                <i class="fa-solid fa-file-lines"></i> Logs & Diagnostics
                            </a>
                            <a href="user-management.html" class="nav-item">
                                <i class="fa-solid fa-users"></i> User Management
                            </a>
                            <a href="help-support.html" class="nav-item">
                                <i class="fa-solid fa-circle-question"></i> Help & Support
                            </a>
                        </div>
                    </div>
                    <div class="sidebar-footer">
                        <div class="user-profile">
                            <div class="user-avatar">
                                <i class="fa-solid fa-user"></i>
                            </div>
                            <div class="user-info">
                                <h4 class="text-sm font-semibold text-slate-800">Admin User</h4>
                                <p class="text-xs text-slate-500">System Administrator</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sidebar-toggle" id="sidebarToggle">
                    <i class="fa-solid fa-bars"></i>
                </div>
            `;
            
            document.getElementById('sidebar-container').innerHTML = fallbackHTML;
            initializeSidebar();
        }

        // Update active page in sidebar
        function updateActivePage() {
            // Remove active class from all nav items
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to CraneIQ Pro
            const craneLink = Array.from(navItems).find(item => 
                item.textContent.includes('CraneIQ Pro') || 
                item.textContent.includes('CraneIQ') ||
                item.textContent.includes('Crane')
            );
            
            if (craneLink) {
                craneLink.classList.add('active');
            }
        }

        // Initialize sidebar functionality
        function initializeSidebar() {
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            
            if (!sidebar || !sidebarToggle) return;
            
            // Toggle sidebar
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('active');
                
                // Toggle icon
                const icon = this.querySelector('i');
                if (sidebar.classList.contains('active')) {
                    icon.className = 'fa-solid fa-times';
                } else {
                    icon.className = 'fa-solid fa-bars';
                }
            });
            
            // Handle mobile menu
            if (window.innerWidth <= 1024) {
                sidebar.classList.add('active');
                sidebarToggle.style.left = '260px';
                sidebarToggle.querySelector('i').className = 'fa-solid fa-times';
            }
            
            // Update on resize
            window.addEventListener('resize', handleResponsive);
        }

        // Handle responsive behavior
        function handleResponsive() {
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            
            if (window.innerWidth <= 1024) {
                sidebar.classList.remove('active');
                sidebarToggle.style.display = 'block';
                sidebarToggle.style.left = '0';
                sidebarToggle.querySelector('i').className = 'fa-solid fa-bars';
            } else {
                sidebar.classList.remove('collapsed');
                sidebar.classList.remove('active');
                sidebarToggle.style.display = 'none';
                sidebarToggle.style.left = '260px';
            }
        }

        // Close sidebar when clicking outside on mobile
        function handleSidebarClickOutside(event) {
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const isMobile = window.innerWidth <= 1024;
            
            if (isMobile && sidebar.classList.contains('active')) {
                const isClickInsideSidebar = sidebar.contains(event.target);
                const isClickOnToggle = sidebarToggle.contains(event.target);
                
                if (!isClickInsideSidebar && !isClickOnToggle) {
                    sidebar.classList.remove('active');
                    sidebarToggle.querySelector('i').className = 'fa-solid fa-bars';
                    sidebarToggle.style.left = '0';
                }
            }
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notification-container');
            
            const notification = document.createElement('div');
            notification.className = `px-4 py-3 rounded-md shadow-lg border transform transition-all duration-300 translate-x-64 opacity-0`;
            
            const colors = {
                info: 'bg-blue-50 text-blue-800 border-blue-200',
                success: 'bg-green-50 text-green-800 border-green-200',
                warning: 'bg-amber-50 text-amber-800 border-amber-200',
                error: 'bg-red-50 text-red-800 border-red-200'
            };
            
            notification.className += ` ${colors[type]}`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fa-solid ${type === 'info' ? 'fa-circle-info' : type === 'success' ? 'fa-circle-check' : type === 'warning' ? 'fa-triangle-exclamation' : 'fa-circle-xmark'} mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            container.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.classList.remove('translate-x-64', 'opacity-0');
                notification.classList.add('translate-x-0', 'opacity-100');
            }, 10);
            
            // Remove after 5 seconds
            setTimeout(() => {
                notification.classList.remove('translate-x-0', 'opacity-100');
                notification.classList.add('translate-x-64', 'opacity-0');
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 5000);
        }

        // Initialize button event listeners
        function initializeButtons() {
            // Header buttons
            document.getElementById('reset-btn')?.addEventListener('click', function() {
                if (confirm('Reset all settings to defaults?')) {
                    showNotification('Settings reset to defaults', 'info');
                }
            });
            
            document.getElementById('cancel-btn')?.addEventListener('click', function() {
                if (confirm('Cancel all changes?')) {
                    window.location.reload();
                }
            });
            
            document.getElementById('save-btn')?.addEventListener('click', function() {
                saveConfiguration();
            });
            
            // Footer buttons
            document.getElementById('test-btn')?.addEventListener('click', function() {
                showNotification('Testing connection to crane...', 'info');
                setTimeout(() => {
                    showNotification('Connection test successful!', 'success');
                }, 2000);
            });
            
            document.getElementById('footer-reset-btn')?.addEventListener('click', function() {
                if (confirm('Reset all CraneIQ settings to factory defaults?')) {
                    showNotification('CraneIQ settings reset to defaults', 'info');
                }
            });
            
            document.getElementById('footer-cancel-btn')?.addEventListener('click', function() {
                if (confirm('Cancel all changes?')) {
                    window.location.reload();
                }
            });
            
            document.getElementById('footer-save-btn')?.addEventListener('click', function() {
                saveConfiguration();
            });
            
            // New buttons
            document.getElementById('upload-layout-btn')?.addEventListener('click', function() {
                showNotification('Upload layout dialog opened', 'info');
            });
            
            document.getElementById('add-peer-btn')?.addEventListener('click', function() {
                showNotification('Add peer crane dialog opened', 'info');
            });
            
            document.getElementById('add-zone-btn')?.addEventListener('click', function() {
                showNotification('Add new zone dialog opened', 'info');
            });
            
            // File upload
            document.getElementById('load-curve-upload')?.addEventListener('click', function() {
                document.getElementById('load-curve-file').click();
            });
            
            document.getElementById('load-curve-file')?.addEventListener('change', function(e) {
                if (e.target.files.length > 0) {
                    const fileName = e.target.files[0].name;
                    showNotification(`Load curve file uploaded: ${fileName}`, 'success');
                }
            });
        }

        // Save configuration function
        function saveConfiguration() {
            const saveBtn = document.getElementById('save-btn');
            const footerSaveBtn = document.getElementById('footer-save-btn');
            
            if (saveBtn) {
                saveBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-2"></i> Saving...';
                saveBtn.disabled = true;
            }
            if (footerSaveBtn) {
                footerSaveBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-2"></i> Saving...';
                footerSaveBtn.disabled = true;
            }
            
            // Simulate API call
            setTimeout(() => {
                if (saveBtn) {
                    saveBtn.innerHTML = '<i class="fa-solid fa-floppy-disk mr-2"></i> Save Changes';
                    saveBtn.disabled = false;
                }
                if (footerSaveBtn) {
                    footerSaveBtn.innerHTML = '<i class="fa-solid fa-floppy-disk mr-2"></i> Save Configuration';
                    footerSaveBtn.disabled = false;
                }
                
                showNotification('CraneIQ configuration saved successfully!', 'success');
            }, 1500);
        }

        // Initialize toggle switches
        function initializeToggles() {
            document.querySelectorAll('input[type="checkbox"][class*="peer"]').forEach(toggle => {
                toggle.addEventListener('change', function() {
                    const settingName = this.closest('div')?.querySelector('span')?.textContent || 'Setting';
                    const status = this.checked ? 'enabled' : 'disabled';
                    showNotification(`${settingName} ${status}`, 'info');
                });
            });
        }

        // Initialize select dropdowns
        function initializeSelects() {
            document.querySelectorAll('select').forEach(select => {
                select.addEventListener('change', function() {
                    const settingName = this.previousElementSibling?.textContent || 'Setting';
                    const value = this.options[this.selectedIndex].text;
                    showNotification(`${settingName} changed to: ${value}`, 'info');
                });
            });
        }

        // Initialize operating mode buttons
        function initializeModeButtons() {
            const modeButtons = document.querySelectorAll('.flex.bg-slate-100 button');
            modeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    modeButtons.forEach(btn => {
                        btn.classList.remove('bg-blue-600', 'text-white', 'shadow');
                        btn.classList.add('text-slate-600', 'hover:bg-slate-50');
                    });
                    this.classList.add('bg-blue-600', 'text-white', 'shadow');
                    this.classList.remove('text-slate-600', 'hover:bg-slate-50');
                    
                    const mode = this.textContent;
                    showNotification(`Operating mode set to: ${mode}`, 'info');
                });
            });
        }

        // Initialize rule engine navigation
        function initializeRuleEngine() {
            // Add smooth scroll for rule links
            document.querySelectorAll('a[href^="#"]').forEach(link => {
                link.addEventListener('click', function(e) {
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        e.preventDefault();
                        
                        // Highlight the target section with animation
                        targetElement.classList.add('highlight-section');
                        
                        // Scroll to the section
                        targetElement.scrollIntoView({ 
                            behavior: 'smooth',
                            block: 'start'
                        });
                        
                        // Remove highlight after animation completes
                        setTimeout(() => {
                            targetElement.classList.remove('highlight-section');
                        }, 2000);
                        
                        // Show notification
                        const sectionName = targetElement.querySelector('h2, h3')?.textContent || 'Configuration Section';
                        showNotification(`Navigated to ${sectionName}`, 'info');
                    }
                });
            });
        }

        // DOM Content Loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('CraneIQ Pro Configuration Initialized');
            
            // Load sidebar first
            loadSidebar();
            
            // Initialize components
            initializeButtons();
            initializeToggles();
            initializeSelects();
            initializeModeButtons();
            initializeRuleEngine();
            
            // Add click outside handler for sidebar
            document.addEventListener('click', handleSidebarClickOutside);
            
            // Initial responsive setup
            setTimeout(() => {
                handleResponsive();
            }, 100);
        });
    </script>
</body>
</html>