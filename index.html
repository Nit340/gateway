<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>General Configuration - Univa Gateway</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        window.FontAwesomeConfig = { autoReplaceSvg: 'nest' };
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563EB',
                        primaryHover: '#1D4ED8',
                        secondary: '#475569',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444',
                        surface: '#F8FAFC',
                        card: '#FFFFFF',
                        border: '#E2E8F0',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    }
                }
            }
        };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #CBD5E1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94A3B8; }
        body { font-family: 'Inter', sans-serif; background-color: #F1F5F9; color: #1E293B; }
        .toggle-checkbox:checked { right: 0; border-color: #2563EB; }
        .toggle-checkbox:checked + .toggle-label { background-color: #2563EB; }
        .radio-checkbox:checked { background-color: #2563EB; border-color: #2563EB; }
        
        /* Sidebar Styles - Hidden by default */
        .sidebar {
            width: 260px;
            background: white;
            border-right: 1px solid #E2E8F0;
            height: 100vh;
            overflow-y: auto;
            position: fixed;
            left: -260px; /* Hidden by default */
            top: 0;
            z-index: 50;
            display: flex;
            flex-direction: column;
            transition: left 0.3s ease;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }
        
        .sidebar.active {
            left: 0; /* Visible when active */
        }
        
        .sidebar.collapsed {
            width: 70px;
        }
        
        .sidebar.collapsed .logo-text,
        .sidebar.collapsed .section-title,
        .sidebar.collapsed .nav-item span:not(.nav-item-count),
        .sidebar.collapsed .user-info,
        .sidebar.collapsed .sidebar-footer {
            display: none;
        }
        
        .sidebar.collapsed .nav-item {
            justify-content: center;
            padding: 12px 0;
        }
        
        .sidebar.collapsed .nav-item i {
            margin-right: 0;
            font-size: 16px;
        }
        
        .sidebar.collapsed .nav-item-count {
            position: absolute;
            top: 4px;
            right: 4px;
            font-size: 10px;
            padding: 1px 4px;
        }
        
        .sidebar-logo {
            height: 64px;
            display: flex;
            align-items: center;
            padding: 0 20px;
            border-bottom: 1px solid #E2E8F0;
            background: white;
            position: relative;
        }
        
        .logo-text {
            font-weight: 700;
            font-size: 18px;
            color: #2563EB;
            transition: opacity 0.3s;
        }
        
        .sidebar-toggle-btn {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            color: #64748B;
            cursor: pointer;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .sidebar-toggle-btn:hover {
            background: #F1F5F9;
            color: #2563EB;
        }
        
        .sidebar.collapsed .sidebar-toggle-btn {
            transform: translateY(-50%) rotate(180deg);
        }
        
        .sidebar-nav {
            flex: 1;
            padding: 16px 0;
            overflow-y: auto;
        }
        
        .nav-section {
            margin-bottom: 24px;
        }
        
        .section-title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #64748B;
            padding: 0 20px 8px;
            margin-bottom: 4px;
            border-bottom: 1px solid #F1F5F9;
            transition: opacity 0.3s;
        }
        
        .sidebar.collapsed .section-title {
            padding: 0 8px 8px;
            text-align: center;
            font-size: 9px;
            border-bottom: none;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 8px 20px;
            color: #475569;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            border-left: 3px solid transparent;
            cursor: pointer;
            position: relative;
        }
        
        .nav-item:hover {
            background: #F8FAFC;
            color: #2563EB;
        }
        
        .nav-item.active {
            background: #EFF6FF;
            color: #2563EB;
            border-left-color: #2563EB;
            font-weight: 600;
        }
        
        .sidebar.collapsed .nav-item.active {
            border-left: none;
            border-right: 3px solid #2563EB;
        }
        
        .nav-item i {
            width: 20px;
            margin-right: 12px;
            font-size: 14px;
            text-align: center;
            transition: margin 0.3s;
        }
        
        .nav-item-count {
            margin-left: auto;
            background: #E2E8F0;
            color: #475569;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 500;
        }
        
        .sidebar-footer {
            padding: 16px 20px;
            border-top: 1px solid #E2E8F0;
            background: white;
            transition: opacity 0.3s;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: linear-gradient(135deg, #2563EB, #1D4ED8);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            flex-shrink: 0;
        }
        
        .user-info h4 {
            font-size: 14px;
            font-weight: 600;
            color: #1E293B;
            margin-bottom: 2px;
        }
        
        .user-info p {
            font-size: 12px;
            color: #64748B;
        }
        
        .main-content-with-sidebar {
            margin-left: 0;
            transition: margin-left 0.3s;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar.active ~ .main-content-with-sidebar {
            margin-left: 260px;
        }
        
        .sidebar.active.collapsed ~ .main-content-with-sidebar {
            margin-left: 70px;
        }
        
        @media (max-width: 1024px) {
            .sidebar {
                left: -260px;
            }
            
            .sidebar.active {
                left: 0;
                box-shadow: 0 0 20px rgba(0,0,0,0.1);
            }
            
            .sidebar.active ~ .main-content-with-sidebar {
                margin-left: 0;
            }
        }
        
        /* Updated WiFi Signal Strength Styles */
        .signal-strength {
            display: flex;
            align-items: flex-end;
            gap: 3px;
            height: 24px;
        }
        
        .signal-bar {
            width: 6px;
            border-radius: 2px;
            transition: background-color 0.3s;
        }
        
        .signal-bar.excellent {
            background-color: #10B981;
        }
        
        .signal-bar.good {
            background-color: #3B82F6;
        }
        
        .signal-bar.fair {
            background-color: #F59E0B;
        }
        
        .signal-bar.poor {
            background-color: #EF4444;
        }
        
        .signal-bar.none {
            background-color: #E2E8F0;
        }
    </style>
</head>
<body class="min-h-screen bg-slate-50">
    
    <!-- Sidebar will be inserted here by JavaScript -->
    <div id="sidebar-container"></div>
    <!-- Overlay for mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Main Content Container -->
    <div class="main-content-with-sidebar">
        <!-- Header - Your requested header -->
        <header id="header" class="bg-white border-b border-border sticky top-0 z-30 shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
                <!-- Left: Logo & Breadcrumb -->
                <div class="flex items-center space-x-4">
                    <div class="hidden md:flex items-center text-sm text-slate-500 h-6">
                        <span><i class="fa-solid fa-plug mr-2"></i>Univa Gateway</span>
                        <i class="fa-solid fa-chevron-right text-xs mx-2"></i>
                        <span class="text-slate-900 font-medium" id="page-title">General Configuration</span>
                    </div>
                </div>

                <!-- Right: Controls -->
                <div class="flex items-center space-x-4">
                    <div class="relative hidden sm:block">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fa-solid fa-server text-slate-400 text-sm"></i>
                        </div>
                        <select id="gateway-select" class="pl-9 pr-8 py-1.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary bg-slate-50 text-slate-700 font-medium cursor-pointer hover:bg-white transition-colors">
                            <option>Univa-GW-01</option>
                            <option>Univa-GW-02</option>
                            <option>Univa-GW-03</option>
                        </select>
                    </div>
                    <div class="h-6 w-px bg-slate-200 mx-2 hidden sm:block"></div>
                    <button class="text-slate-500 hover:text-slate-700 font-medium text-sm px-3 py-1.5 rounded-lg hover:bg-slate-100 transition-colors">
                        <i class="fa-solid fa-circle-question mr-2"></i> Help
                    </button>
                    
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="mb-8">
                    <h1 class="text-2xl font-bold text-slate-900">General Configuration</h1>
                    <p class="text-slate-500 text-sm mt-1">Establish gateway identity, network, time, and operational behavior. Required before activating any device, safety logic, or protocol communication.</p>
                </div>

                <div class="space-y-8">
                    
                    <!-- SECTION A: Gateway Identity -->
                    <section id="section-identity" class="bg-white rounded-xl shadow-sm border border-border p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-lg font-semibold text-slate-800 flex items-center">
                                <i class="fa-regular fa-id-card mr-2 text-primary"></i> 
                                <span class="mr-2">Gateway Identity</span>
                                <span class="text-xs font-normal text-slate-500">SECTION A</span>
                            </h2>
                            <div class="text-xs text-slate-500 bg-slate-100 px-3 py-1 rounded-full">
                                Required for ERP/Cloud Integration
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">Gateway Name <span class="text-red-500">*</span></label>
                                <input type="text" value="Univa-GW-01" class="w-full rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary placeholder-slate-400" placeholder="Enter gateway name">
                                <p class="text-xs text-slate-500 mt-1">Human-readable ID used in cloud UI dashboards</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">Serial Number</label>
                                <div class="relative">
                                    <input type="text" value="GW2025-1190021" readonly class="w-full bg-slate-100 font-mono rounded-lg border-slate-200 border px-3 py-2 text-sm text-slate-600">
                                    <i class="fa-solid fa-lock absolute right-3 top-2.5 text-slate-400 text-xs"></i>
                                </div>
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-slate-700 mb-1">Deployment Site <span class="text-red-500">*</span></label>
                                <input type="text" value="Chennai Port - Zone A" class="w-full rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary" placeholder="Site name or description">
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-slate-700 mb-3">Location Mode</label>
                                <div class="flex items-center space-x-6">
                                    <label class="flex items-center">
                                        <input type="radio" name="location-mode" value="manual" class="h-4 w-4 text-primary focus:ring-primary border-slate-300" checked>
                                        <span class="ml-2 text-sm text-slate-700">Manual Entry</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="location-mode" value="gps" class="h-4 w-4 text-primary focus:ring-primary border-slate-300">
                                        <span class="ml-2 text-sm text-slate-700">GPS Automatic</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4 md:col-span-2">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Latitude</label>
                                    <input type="text" value="12.99123" class="w-full font-mono rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary" placeholder="0.000000">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Longitude</label>
                                    <input type="text" value="80.12312" class="w-full font-mono rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary" placeholder="0.000000">
                                </div>
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-slate-700 mb-1">Asset/Crane ID</label>
                                <input type="text" value="CRN-CT-12" class="w-full rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary" placeholder="Optional asset identifier">
                                <p class="text-xs text-slate-500 mt-1">Used by CraneIQ for zoning, map overlays, and anti-collision</p>
                            </div>
                        </div>
                    </section>

                    <!-- SECTION B: Date, Time & Localization -->
                    <section id="section-time" class="bg-white rounded-xl shadow-sm border border-border p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-lg font-semibold text-slate-800 flex items-center">
                                <i class="fa-regular fa-clock mr-2 text-primary"></i> 
                                <span class="mr-2">Date, Time & Localization</span>
                                <span class="text-xs font-normal text-slate-500">SECTION B</span>
                            </h2>
                            <div class="text-xs text-slate-500 bg-slate-100 px-3 py-1 rounded-full">
                                Ensures correct event sequencing
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">Timezone <span class="text-red-500">*</span></label>
                                <select class="w-full rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary bg-white">
                                    <option>Asia/Kolkata (GMT+05:30)</option>
                                    <option>UTC (GMT+00:00)</option>
                                    <option>America/New_York (GMT-05:00)</option>
                                    <option>Europe/London (GMT+00:00)</option>
                                    <option>Asia/Singapore (GMT+08:00)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">NTP Server <span class="text-red-500">*</span></label>
                                <select class="w-full rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary bg-white">
                                    <option>pool.ntp.org</option>
                                    <option>time.google.com</option>
                                    <option>time.windows.com</option>
                                    <option>time.apple.com</option>
                                    <option>Custom...</option>
                                </select>
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-slate-700 mb-1">Set Time Manually (Fallback)</label>
                                <div class="flex items-center space-x-4">
                                    <input type="date" value="2025-03-12" class="rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                    <input type="time" value="14:53" class="rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                    <button class="text-primary hover:text-primaryHover font-medium text-sm px-4 py-2 border border-primary/30 rounded-lg hover:bg-blue-50 transition-colors">
                                        <i class="fa-solid fa-rotate mr-2"></i> Sync Now
                                    </button>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">Date Format</label>
                                <select class="w-full rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary bg-white">
                                    <option>DD/MM/YYYY</option>
                                    <option>MM/DD/YYYY</option>
                                    <option>YYYY-MM-DD</option>
                                    <option>DD Month YYYY</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">Time Format</label>
                                <select class="w-full rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary bg-white">
                                    <option>24-Hour (14:30)</option>
                                    <option>12-Hour (2:30 PM)</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">Language</label>
                                <select class="w-full rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary bg-white">
                                    <option>English</option>
                                    <option>हिंदी (Hindi)</option>
                                    <option>Español (Spanish)</option>
                                    <option>Français (French)</option>
                                    <option>Deutsch (German)</option>
                                </select>
                            </div>
                        </div>
                    </section>

                    <!-- SECTION C: Network Configuration -->
                    <section id="section-network" class="bg-white rounded-xl shadow-sm border border-border p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-lg font-semibold text-slate-800 flex items-center">
                                <i class="fa-solid fa-network-wired mr-2 text-primary"></i> 
                                <span class="mr-2">Network Configuration</span>
                                <span class="text-xs font-normal text-slate-500">SECTION C</span>
                            </h2>
                            <div class="text-xs text-slate-500 bg-slate-100 px-3 py-1 rounded-full">
                                Defines MQTT, Modbus TCP, OTA, and Cloud API connections
                            </div>
                        </div>
                        
                        <!-- Network Mode Selection -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-slate-700 mb-3">Network Mode</label>
                            <div class="flex flex-wrap gap-4">
                                <label class="flex items-center">
                                    <input type="radio" name="network-mode" value="ethernet" class="h-4 w-4 text-primary focus:ring-primary border-slate-300" checked>
                                    <span class="ml-2 text-sm text-slate-700 flex items-center">
                                        <i class="fa-solid fa-ethernet mr-2"></i> Ethernet
                                    </span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="network-mode" value="wifi" class="h-4 w-4 text-primary focus:ring-primary border-slate-300">
                                    <span class="ml-2 text-sm text-slate-700 flex items-center">
                                        <i class="fa-solid fa-wifi mr-2"></i> WiFi
                                    </span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="network-mode" value="lte" class="h-4 w-4 text-primary focus:ring-primary border-slate-300">
                                    <span class="ml-2 text-sm text-slate-700 flex items-center">
                                        <i class="fa-solid fa-signal mr-2"></i> LTE/4G
                                    </span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Ethernet Configuration -->
                        <div id="ethernet-config" class="mb-6 space-y-4">
                            <h3 class="text-sm font-semibold text-slate-900 mb-3">Ethernet Configuration</h3>
                            
                            <div class="flex items-center space-x-6 mb-4">
                                <label class="flex items-center">
                                    <input type="radio" name="ip-assignment" value="dhcp" class="h-4 w-4 text-primary focus:ring-primary border-slate-300" checked>
                                    <span class="ml-2 text-sm text-slate-700">DHCP</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="ip-assignment" value="static" class="h-4 w-4 text-primary focus:ring-primary border-slate-300">
                                    <span class="ml-2 text-sm text-slate-700">Static IP</span>
                                </label>
                            </div>
                            
                            <div id="static-ip-config" class="hidden grid grid-cols-1 md:grid-cols-2 gap-4 bg-slate-50 p-4 rounded-lg border border-slate-200">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">IP Address</label>
                                    <input type="text" value="192.168.1.50" class="w-full font-mono rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Subnet Mask</label>
                                    <input type="text" value="255.255.255.0" class="w-full font-mono rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Gateway</label>
                                    <input type="text" value="192.168.1.1" class="w-full font-mono rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">DNS 1</label>
                                    <input type="text" value="8.8.8.8" class="w-full font-mono rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">DNS 2</label>
                                    <input type="text" value="8.8.4.4" class="w-full font-mono rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                </div>
                            </div>
                        </div>
                        
                        <!-- WiFi Configuration -->
                        <div id="wifi-config" class="hidden mb-6 space-y-4">
                            <h3 class="text-sm font-semibold text-slate-900 mb-3">WiFi Configuration</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">SSID</label>
                                    <input type="text" class="w-full rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary" placeholder="WiFi network name">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Password</label>
                                    <input type="password" class="w-full rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary" placeholder="WiFi password">
                                </div>
                            </div>
                            <!-- FIXED: WiFi Signal Strength - Now left-to-right (weakest on left, strongest on right) -->
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-slate-700">Signal Strength:</span>
                                <div class="signal-strength">
                                    <div class="signal-bar none" style="height: 4px;"></div>
                                    <div class="signal-bar poor" style="height: 8px;"></div>
                                    <div class="signal-bar fair" style="height: 12px;"></div>
                                    <div class="signal-bar good" style="height: 16px;"></div>
                                    <div class="signal-bar excellent" style="height: 20px;"></div>
                                </div>
                                <span class="text-sm font-medium text-slate-700 ml-2">Good</span>
                                <button type="button" onclick="scanWiFi()" class="ml-2 text-xs text-primary hover:text-primaryHover">
                                    <i class="fa-solid fa-rotate"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Cellular/LTE Configuration -->
                        <div id="cellular-config" class="hidden mb-6 space-y-4">
                            <h3 class="text-sm font-semibold text-slate-900 mb-3">Cellular/LTE Configuration</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">APN</label>
                                    <input type="text" value="internet" class="w-full rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Username</label>
                                    <input type="text" class="w-full rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Password</label>
                                    <input type="password" class="w-full rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                </div>
                                <div class="flex items-center">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Signal Strength</label>
                                        <div class="flex items-center space-x-2">
                                            <span class="text-sm font-mono">-67 dBm</span>
                                            <span class="text-xs px-2 py-1 bg-emerald-100 text-emerald-800 rounded-full">Good</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- MAC Address Display -->
                        <div class="border-t border-slate-200 pt-6">
                            <div class="p-4 border border-slate-200 rounded-lg bg-slate-50">
                                <label class="block text-sm font-medium text-slate-700 mb-1">MAC Address</label>
                                <div class="font-mono text-slate-600">00:1A:2B:3C:4D:5E</div>
                                <p class="text-xs text-slate-500 mt-1">Unique hardware identifier for network communication</p>
                            </div>
                        </div>
                    </section>

                    <!-- SECTION D: System Heartbeat & Cloud Health - SIMPLIFIED -->
                    <section id="section-heartbeat" class="bg-white rounded-xl shadow-sm border border-border p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-lg font-semibold text-slate-800 flex items-center">
                                <i class="fa-solid fa-heart-pulse mr-2 text-primary"></i> 
                                <span class="mr-2">System Heartbeat & Cloud Health</span>
                                <span class="text-xs font-normal text-slate-500">SECTION D</span>
                            </h2>
                            <div class="text-xs text-slate-500 bg-slate-100 px-3 py-1 rounded-full">
                                Monitors gateway connectivity
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">Heartbeat Interval</label>
                                <div class="flex items-center">
                                    <input type="number" value="30" min="10" max="3600" class="w-32 rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                    <span class="ml-2 text-sm text-slate-700">seconds</span>
                                </div>
                                <p class="text-xs text-slate-500 mt-1">How often gateway reports to cloud</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">Offline Threshold</label>
                                <div class="flex items-center">
                                    <input type="number" value="120" min="30" max="3600" class="w-32 rounded-lg border-slate-300 border px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                    <span class="ml-2 text-sm text-slate-700">seconds</span>
                                </div>
                                <p class="text-xs text-slate-500 mt-1">When to mark gateway as offline</p>
                            </div>
                        </div>
                    </section>

                </div>
            </div>
                    <!-- Footer with Action Buttons -->
        <footer class="mt-8 pb-8">
            <div class="flex flex-col sm:flex-row items-center justify-between gap-4 p-6 bg-white rounded-xl shadow-sm border border-border">
                <div class="text-sm text-slate-500">
                    <p><i class="fa-solid fa-circle-info mr-1"></i> Fields marked with <span class="text-red-500">*</span> are required for gateway operation.</p>
                </div>
                <div class="flex items-center space-x-4">
                    <button type="button" id="refresh-btn" class="px-5 py-2.5 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                        <i class="fa-solid fa-rotate mr-2"></i> Refresh
                    </button>
                    <button type="button" id="save-btn" class="px-5 py-2.5 text-sm font-medium text-white bg-primary hover:bg-primaryHover rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary shadow-sm">
                        <i class="fa-solid fa-floppy-disk mr-2"></i> Save Changes
                    </button>
                </div>
            </div>
        </footer>
        </main>
    </div> <!-- End of main content container -->

    <script>
        // Handle Refresh button
document.getElementById('refresh-btn').addEventListener('click', function() {
    if (confirm('Refresh page? Any unsaved changes will be lost.')) {
        location.reload();
    }
});

// Handle Save Changes button
document.getElementById('save-btn').addEventListener('click', function() {
    const saveBtn = this;
    const originalText = saveBtn.innerHTML;
    
    // Show loading state
    saveBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-2"></i> Saving...';
    saveBtn.disabled = true;
    
    // Simulate API call
    setTimeout(() => {
        // Show success message
        saveBtn.innerHTML = '<i class="fa-solid fa-check mr-2"></i> Saved Successfully!';
        saveBtn.classList.remove('bg-primary', 'hover:bg-primaryHover');
        saveBtn.classList.add('bg-success', 'hover:bg-emerald-600');
        
        // Revert after 2 seconds
        setTimeout(() => {
            saveBtn.innerHTML = originalText;
            saveBtn.classList.remove('bg-success', 'hover:bg-emerald-600');
            saveBtn.classList.add('bg-primary', 'hover:bg-primaryHover');
            saveBtn.disabled = false;
        }, 2000);
        
        // Show notification
        showNotification('Configuration saved successfully!', 'success');
    }, 1500);
});

// Notification function
function showNotification(message, type = 'success') {
    const notification = document.createElement('div');
    notification.className = `fixed top-4 right-4 px-4 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 transform translate-x-full`;
    
    if (type === 'success') {
        notification.className += ' bg-emerald-50 border border-emerald-200 text-emerald-800';
    } else if (type === 'error') {
        notification.className += ' bg-red-50 border border-red-200 text-red-800';
    }
    
    notification.innerHTML = `
        <div class="flex items-center">
            <i class="fa-solid ${type === 'success' ? 'fa-circle-check' : 'fa-circle-exclamation'} mr-3"></i>
            <span class="font-medium">${message}</span>
            <button class="ml-4 text-slate-400 hover:text-slate-600" onclick="this.parentElement.parentElement.remove()">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
    `;
    
    document.body.appendChild(notification);
    
    // Animate in
    setTimeout(() => {
        notification.classList.remove('translate-x-full');
    }, 10);
    
    // Auto remove after 5 seconds
    setTimeout(() => {
        if (notification.parentNode) {
            notification.style.opacity = '0';
            notification.style.transform = 'translateX(100%)';
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 300);
        }
    }, 5000);
}
        // Fetch and insert sidebar from sidebar.html
        async function loadSidebar() {
            try {
                const response = await fetch('sidebar.html');
                if (!response.ok) {
                    throw new Error(`Failed to load sidebar: ${response.status}`);
                }
                
                const html = await response.text();
                
                // Insert the entire HTML content
                document.getElementById('sidebar-container').innerHTML = html;
                
                // Update the active page to General Configuration
                updateActivePage();
                
                // Initialize sidebar functionality
                initializeSidebar();
                
            } catch (error) {
                console.error('Error loading sidebar:', error);
                // Fallback: create a basic sidebar if fetch fails
                createFallbackSidebar();
            }
        }

        // Create fallback sidebar with toggle
        function createFallbackSidebar() {
            const fallbackHTML = `
                <div class="sidebar" id="sidebar">
                    <div class="sidebar-logo">
                        <div class="logo-text">
                            <i class="fa-solid fa-satellite-dish mr-2"></i> Innospace
                        </div>
                        <button class="sidebar-toggle-btn" id="sidebarCollapseBtn">
                            <i class="fa-solid fa-chevron-left"></i>
                        </button>
                    </div>
                    <div class="sidebar-nav">
                        <div class="nav-section">
                            <div class="section-title">Configuration</div>
                            <a href="general-configuration.html" class="nav-item active">
                                <i class="fa-solid fa-sliders"></i> <span>General Configuration</span>
                            </a>
                            <a href="device-management.html" class="nav-item">
                                <i class="fa-solid fa-microchip"></i> <span>Device management</span>
                            </a>
                            <a href="#" class="nav-item">
                                <i class="fa-solid fa-shield-halved"></i> <span>Safety Logic</span>
                                <span class="nav-item-count">12</span>
                            </a>
                            <a href="#" class="nav-item">
                                <i class="fa-solid fa-plug"></i> <span>Protocols</span>
                            </a>
                        </div>
                        <div class="nav-section">
                            <div class="section-title">Monitoring</div>
                            <a href="#" class="nav-item">
                                <i class="fa-solid fa-chart-line"></i> <span>Dashboard</span>
                            </a>
                            <a href="#" class="nav-item">
                                <i class="fa-solid fa-bell"></i> <span>Alerts</span>
                                <span class="nav-item-count">3</span>
                            </a>
                            <a href="#" class="nav-item">
                                <i class="fa-solid fa-file-lines"></i> <span>Logs</span>
                            </a>
                        </div>
                        <div class="nav-section">
                            <div class="section-title">System</div>
                            <a href="#" class="nav-item">
                                <i class="fa-solid fa-users"></i> <span>Users</span>
                            </a>
                            <a href="#" class="nav-item">
                                <i class="fa-solid fa-download"></i> <span>Updates</span>
                            </a>
                            <a href="#" class="nav-item">
                                <i class="fa-solid fa-gear"></i> <span>Settings</span>
                            </a>
                        </div>
                    </div>
                    <div class="sidebar-footer">
                        <div class="user-profile">
                            <div class="user-avatar">
                                <i class="fa-solid fa-user"></i>
                            </div>
                            <div class="user-info">
                                <h4>Admin User</h4>
                                <p>System Administrator</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('sidebar-container').innerHTML = fallbackHTML;
            initializeSidebar();
        }

        // Update active page in sidebar
        function updateActivePage() {
            // Remove active class from all nav items
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to General Configuration
            const generalConfigLink = Array.from(navItems).find(item => 
                item.textContent.includes('General Configuration') || 
                item.textContent.includes('General Configuration')
            );
            
            if (generalConfigLink) {
                generalConfigLink.classList.add('active');
            }
        }

        // Initialize sidebar functionality
        function initializeSidebar() {
            const sidebar = document.getElementById('sidebar');
            const sidebarCollapseBtn = document.getElementById('sidebarCollapseBtn');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            
            if (!sidebar) return;
            
            // Toggle sidebar collapse (expand/collapse within sidebar)
            if (sidebarCollapseBtn) {
                sidebarCollapseBtn.addEventListener('click', function(e) {
                    e.stopPropagation(); // Prevent triggering parent click
                    sidebar.classList.toggle('collapsed');
                    
                    // Toggle icon
                    const icon = this.querySelector('i');
                    if (sidebar.classList.contains('collapsed')) {
                        icon.className = 'fa-solid fa-chevron-right';
                    } else {
                        icon.className = 'fa-solid fa-chevron-left';
                    }
                });
            }
            
            // Close sidebar when clicking overlay (mobile)
            if (sidebarOverlay) {
                sidebarOverlay.addEventListener('click', function() {
                    closeSidebar();
                });
            }
            
            // Close sidebar when clicking outside on desktop
            document.addEventListener('click', function(event) {
                if (window.innerWidth > 1024) {
                    const isClickInsideSidebar = sidebar.contains(event.target);
                    
                    if (!isClickInsideSidebar && sidebar.classList.contains('active')) {
                        closeSidebar();
                    }
                }
            });
            
            // Close sidebar on escape key
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape' && sidebar.classList.contains('active')) {
                    closeSidebar();
                }
            });
        }

        // Close sidebar
        function closeSidebar() {
            const sidebar = document.getElementById('sidebar');
            
            if (sidebar) {
                sidebar.classList.remove('active');
                
                // Hide overlay
                const overlay = document.getElementById('sidebarOverlay');
                if (overlay) {
                    overlay.style.display = 'none';
                }
            }
        }

        // WiFi Signal Strength Functions
        function updateWiFiSignalStrength(strength) {
            // strength can be 0-4 (0=none, 1=poor, 2=fair, 3=good, 4=excellent)
            const signalBars = document.querySelectorAll('#wifi-config .signal-bar');
            const strengthTexts = ['None', 'Poor', 'Fair', 'Good', 'Excellent'];
            
            // Reset all bars to none
            signalBars.forEach(bar => {
                bar.className = 'signal-bar none';
            });
            
            // Activate bars from left to right
            for (let i = 0; i <= strength; i++) {
                if (i < signalBars.length) {
                    const bar = signalBars[i];
                    if (i === 0) bar.className = 'signal-bar poor';
                    else if (i === 1) bar.className = 'signal-bar fair';
                    else if (i === 2) bar.className = 'signal-bar good';
                    else if (i === 3) bar.className = 'signal-bar good';
                    else if (i === 4) bar.className = 'signal-bar excellent';
                }
            }
            
            // Update strength text
            const strengthSpan = document.querySelector('#wifi-config .signal-strength + span');
            if (strengthSpan) {
                strengthSpan.textContent = strengthTexts[strength];
            }
        }

        function scanWiFi() {
            const scanButton = document.querySelector('#wifi-config button');
            const originalHTML = scanButton.innerHTML;
            
            // Show scanning animation
            scanButton.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';
            scanButton.disabled = true;
            
            // Simulate WiFi scan
            setTimeout(() => {
                // Random signal strength between 1-4
                const randomStrength = Math.floor(Math.random() * 4) + 1;
                updateWiFiSignalStrength(randomStrength);
                
                // Restore button
                scanButton.innerHTML = '<i class="fa-solid fa-rotate"></i>';
                scanButton.disabled = false;
                
                // Show notification
                alert(`WiFi scan complete. Signal strength: ${['None', 'Poor', 'Fair', 'Good', 'Excellent'][randomStrength]}`);
            }, 1500);
        }

        // Network Configuration Functions
        function toggleNetworkConfig() {
            const networkMode = document.querySelector('input[name="network-mode"]:checked').value;
            
            // Hide all config sections
            document.getElementById('ethernet-config').style.display = 'none';
            document.getElementById('wifi-config').style.display = 'none';
            document.getElementById('cellular-config').style.display = 'none';
            
            // Show selected config
            if (networkMode === 'ethernet') {
                document.getElementById('ethernet-config').style.display = 'block';
            } else if (networkMode === 'wifi') {
                document.getElementById('wifi-config').style.display = 'block';
                // Initialize WiFi signal strength
                updateWiFiSignalStrength(3); // Start with "Good" signal
            } else if (networkMode === 'lte') {
                document.getElementById('cellular-config').style.display = 'block';
            }
        }

        function toggleIPAssignment() {
            const ipAssignment = document.querySelector('input[name="ip-assignment"]:checked').value;
            const staticConfig = document.getElementById('static-ip-config');
            
            if (ipAssignment === 'static') {
                staticConfig.classList.remove('hidden');
            } else {
                staticConfig.classList.add('hidden');
            }
        }

        // Initialize event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Load sidebar first
            loadSidebar();
            
            // Network mode toggle
            document.querySelectorAll('input[name="network-mode"]').forEach(radio => {
                radio.addEventListener('change', toggleNetworkConfig);
            });
            
            // IP assignment toggle
            document.querySelectorAll('input[name="ip-assignment"]').forEach(radio => {
                radio.addEventListener('change', toggleIPAssignment);
            });
            
            // Initialize network config
            toggleNetworkConfig();
            toggleIPAssignment();
            
            // Handle gateway select
            const gatewaySelect = document.getElementById('gateway-select');
            if (gatewaySelect) {
                gatewaySelect.addEventListener('change', function() {
                    if (confirm('Switch to another gateway? Unsaved changes will be lost.')) {
                        window.location.reload();
                    } else {
                        this.value = 'Univa-GW-01';
                    }
                });
            }
            
            // Initial responsive setup
            setTimeout(() => {
                handleResponsive();
            }, 100);
        });

        // Handle responsive behavior
        function handleResponsive() {
            const sidebar = document.getElementById('sidebar');
            
            if (window.innerWidth <= 1024) {
                // On mobile, ensure sidebar is hidden by default
                if (sidebar && sidebar.classList.contains('active')) {
                    sidebar.classList.remove('active');
                }
            } else {
                // On desktop, ensure overlay is hidden
                const overlay = document.getElementById('sidebarOverlay');
                if (overlay) {
                    overlay.style.display = 'none';
                }
            }
        }
    </script>
</body>
</html>